<t-navbar left-arrow />
<view class="page login">
  <view class="login__title">{{ isLogin ? '欢迎登录' : '创建账户' }}</view>
  
  <view class="login__content">
    <!-- 用户名输入框 -->
    <view class="login__input">
      <t-input
        label="用户名"
        placeholder="请输入用户名"
        value="{{username}}"
        bindchange="onUsernameChange"
      ></t-input>
    </view>

    <!-- 密码输入框 -->
    <view class="login__input">
      <t-input
        label="密码"
        placeholder="请输入密码"
        type="password"
        clearable
        value="{{password}}"
        bindchange="onPasswordChange"
      />
    </view>

    <!-- 注册模式：确认密码输入框 -->
    <view class="login__input" wx:if="{{!isLogin}}">
      <t-input
        label="确认密码"
        placeholder="请再次输入密码"
        type="password"
        clearable
        value="{{confirmPassword}}"
        bindchange="onConfirmPasswordChange"
      />
    </view>

    <!-- 同意条款 -->
    <view class="login__check">
      <t-checkbox-group bind:change="onCheckChange">
        <t-checkbox
          value="agree"
          label="我同意《用户协议》和《隐私政策》"
        />
      </t-checkbox-group>
    </view>

    <!-- 提交按钮 -->
    <view class="login__button">
      <t-button 
        theme="primary" 
        size="large" 
        block 
        disabled="{{!isSubmit}}" 
        loading="{{isLoading}}"
        bindtap="submitForm"
      >
        {{ isLogin ? '登录' : '注册' }}
      </t-button>
    </view>

    <!-- 切换登录/注册 -->
    <view class="login__toggle">
      <text class="toggle-text">{{ isLogin ? '没有账户？' : '已有账户？' }}</text>
      <text class="toggle-link" bindtap="toggleMode">
        {{ isLogin ? '立即注册' : '立即登录' }}
      </text>
    </view>
  </view>
</view>
